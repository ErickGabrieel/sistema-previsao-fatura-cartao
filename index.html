<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>PrevisÃ£o de Fatura</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>

<div class="container">

    <h1>PrevisÃ£o de Fatura</h1>

    <div class="input-group">
        <span>ðŸ“…</span>
        <input type="date" id="dataCompra">
    </div>

    <div class="input-group">
        <span>ðŸ”’</span>
        <input type="number" placeholder="Dia de Fechamento" id="fechamento">
    </div>

    <div class="input-group">
        <span>ðŸ’³</span>
        <input type="number" placeholder="Dia de Vencimento" id="vencimento">
    </div>

    <button onclick="calcular()">Calcular</button>

    <h2 id="resultado"></h2>

</div>

<script>
function calcular() {
  const dataStr = document.getElementById("dataCompra").value; // YYYY-MM-DD
  const fechamento = parseInt(document.getElementById("fechamento").value, 10);
  const vencimento = parseInt(document.getElementById("vencimento").value, 10);

  if (!dataStr || isNaN(fechamento) || isNaN(vencimento)) {
    document.getElementById("resultado").innerText = "Preencha todos os campos.";
    return;
  }

  // Parse seguro (sem bug de fuso):
  const [ano, mes, dia] = dataStr.split("-").map(Number); // mes: 1-12
  const dataCompra = new Date(ano, mes - 1, dia);

  // Regra:
  // 1..(fechamento-1) => vence no mesmo mÃªs
  // fechamento..fim do mÃªs => vence no mÃªs seguinte
  let mesVenc = mes;   // 1-12 (comeÃ§a no mesmo mÃªs)
  let anoVenc = ano;

  if (dia >= fechamento) {
    mesVenc += 1;
    if (mesVenc === 13) { mesVenc = 1; anoVenc += 1; }
  }

  // Monta a data de vencimento (dia vencimento no mÃªs calculado)
  const dataVenc = new Date(anoVenc, mesVenc - 1, vencimento);

  document.getElementById("resultado").innerText =
    "Essa compra vencerÃ¡ em: " + dataVenc.toLocaleDateString("pt-BR");
}
</script>
